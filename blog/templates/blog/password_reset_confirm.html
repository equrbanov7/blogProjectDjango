{% extends "base.html" %}
{% load static %}

{% block title %}Yeni şifrə | MyBlog{% endblock %}

{% block extraCss %}
   <link rel="stylesheet" href="{% static 'css/password_reset_confirm.css' %}"> 
{% endblock %}

{% block content %}
<div class="register-page-wrapper">
  <div class="register-card">
    
    {% if validlink %}
      <div class="auth-icon-header">
        <i class="fas fa-shield-alt"></i>
      </div>

      <h1 class="register-heading">Yeni şifrə təyin et</h1>
      <p class="register-subheading">Zəhmət olmasa hesabınız üçün yeni və güclü bir şifrə yazın.</p>

      <form method="post" class="register-form">
        {% csrf_token %}

        <div class="register-form-field">
          {{ form.new_password1.label_tag }}
          {{ form.new_password1 }}

          <div class="register-form-field">
            {{ form.new_password2.label_tag }}
            {{ form.new_password2 }}
            {% if form.new_password2.errors %}
              <div class="register-field-error">{{ form.new_password2.errors.0 }}</div>
            {% endif %}
          </div>
          
          {% if form.new_password1.help_text %}
            <div class="password-help-text">
              <i class="fas fa-info-circle"></i> {{ form.new_password1.help_text|safe }}
            </div>
          {% endif %}

          {% if form.new_password1.errors %}
            <div class="register-field-error">{{ form.new_password1.errors.0 }}</div>
          {% endif %}
        </div>

       

        <button type="submit" class="register-submit-btn">Şifrəni dəyiş</button>
      </form>

    {% else %}
      <div class="error-icon-box">
        <i class="fas fa-exclamation-triangle"></i>
      </div>

      <h1 class="register-heading">Link Etibarsızdır</h1>
      <p class="register-subheading">
        Bu link artıq istifadə olunub və ya vaxtı bitib. Təhlükəsizlik səbəbi ilə linklər birdəfəlikdir.
      </p>

      <a href="{% url 'password_reset' %}" class="retry-btn">
        Yenidən şifrə istə
      </a>
    {% endif %}
    
  </div>
</div>
{% endblock %}