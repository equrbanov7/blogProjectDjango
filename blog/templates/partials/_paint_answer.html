{# templates/partials/paint_answer.html #}
{% load static %}

{# Bu partial q vÉ™ ans gÃ¶zlÉ™yir #}
<div class="paint-card"
     data-qid="{{ q.id }}"
     {% if ans and ans.paint_image %}
     data-existing-url="{{ ans.paint_image.url }}"
     {% endif %}>

  <div class="paint-header">
    <div class="paint-toggle">
      {# Hidden input: backend-dÉ™ paint_enabled_{qid} oxuyursan #}
      <input type="hidden" name="paint_enabled_{{ q.id }}" value="{% if ans and ans.has_paint %}1{% else %}0{% endif %}" class="paint-enabled-hidden">

      <label class="paint-switch">
        <input type="checkbox"
               class="paint-enabled-checkbox"
               {% if ans and ans.has_paint %}checked{% endif %}>
        <span class="paint-switch-ui"></span>
        <span class="paint-switch-text">Paint cavabÄ±</span>
      </label>
    </div>

    <div class="paint-hint">
      QÉ™lÉ™m / silgi ilÉ™ Ã§É™k, avtomatik yadda saxlanÄ±r.
    </div>
  </div>

  <div class="paint-body" style="{% if ans and ans.has_paint %}display:block{% else %}display:none{% endif %}">
    <div class="paint-toolbar">
      <div class="paint-tools">
        <button type="button" class="paint-btn paint-pen active" title="QÉ™lÉ™m">âœï¸ QÉ™lÉ™m</button>
        <button type="button" class="paint-btn paint-eraser" title="Silgi">ğŸ§½ Silgi</button>
      </div>

      <div class="paint-controls">
        <label class="paint-control">
          RÉ™ng
          <input type="color" class="paint-color" value="#111111">
        </label>

        <label class="paint-control">
          QalÄ±nlÄ±q
          <input type="range" class="paint-width" min="1" max="30" value="4">
          <span class="paint-width-val">4</span>
        </label>

        <button type="button" class="paint-btn paint-clear" title="HamÄ±sÄ±nÄ± tÉ™mizlÉ™">ğŸ—‘ï¸ TÉ™mizlÉ™</button>
      </div>

      <div class="paint-actions">
        <button type="button" class="paint-btn paint-save" title="ÅÉ™kli saxla">ğŸ’¾ Saxla</button>
      </div>
    </div>

    <div class="paint-canvas-wrap">
      <canvas class="paint-canvas"></canvas>
    </div>

    {# Backend Ã¼Ã§Ã¼n hidden input-lar #}
    <input type="hidden" name="paint_clear_{{ q.id }}" value="0" class="paint-clear-hidden">
    <input type="hidden" name="paint_data_{{ q.id }}" class="paint-data-hidden" value="">
  </div>
</div>
